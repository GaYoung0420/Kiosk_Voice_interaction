<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <div style="border: red solid 1px; width: 1080px; height: 1920px">
      <img id="img" src="img/1-1.png" />
    </div>
  </body>
  <script>
    // 이벤트 리스너 함수 정의
    function handleLocalStorageChange(event) {
      if (event.key === "file") {
        console.log(
          "localStorage가 변경되었습니다. 새로운 값:",
          event.newValue
        );
        change_img(event.newValue);
      }
    }

    function change_img(value) {
      let value_file = value.replace(".wav", "");
      let img_src = "/img/" + value.replace(".wav", "") + ".png";
      if (
        value_file == "1-1" ||
        value_file == "1-5" ||
        value_file == "1-9" ||
        value_file == "1-12" ||
        value_file == "2-1" ||
        value_file == "2-3" ||
        value_file == "2-5" ||
        value_file == "2-7" ||
        value_file == "2-10" ||
        value_file == "3-1" ||
        value_file == "3-5" ||
        value_file == "4-1" ||
        value_file == "4-4" ||
        value_file == "5-1" ||
        value_file == "5-4" ||
        value_file == "5-7" ||
        value_file == "5-9" ||
        value_file == "5-14" ||
        value_file == "6-1" ||
        value_file == "6-8" ||
        value_file == "7-1" ||
        value_file == "7-4"
      ) {
        $("#img").attr("src", img_src);
        if (value_file == "6-1") {
          $("#img").rotate(90);
        } else if (value_file == "7-1") $("#img").rotate(-90);
      }
    }

    // Storage 이벤트 리스너 등록
    window.addEventListener("storage", handleLocalStorageChange);
  </script>
</html>
